{
   "$schema": "http://json-schema.org/draft-07/schema#",
   "type": "object",
   "title": "Wait Node Configuration Schema",
   "properties": {
     "input": {
       "type": "object",
       "title": "Input Schema",
       "properties": {
         "mode": {
           "type": "string",
           "enum": ["all", "any", "threshold"],
           "default": "any",
           "description": "The condition to wait for. ''all'' waits for all nodes, ''any'' waits for at least one, ''threshold'' waits for a specific number of nodes."
         },
         "threshold": {
           "type": "integer",
           "description": "The number of nodes that must be complete when mode is ''threshold''.",
           "default": 1
         },
         "waitingNodes": {
           "type": "object",
           "description": "A map where keys are node IDs and values are their completion status (boolean).",
           "additionalProperties": {
             "type": "boolean"
           }
         }
       },
       "required": ["waitingNodes"],
       "if": {
         "properties": { "mode": { "const": "threshold" } }
       },
       "then": {
         "required": ["threshold"]
       }
     },
     "output": {
       "type": "object",
       "title": "Output Schema",
       "properties": {
         "waitingNodes": {
           "type": "object",
           "additionalProperties": { "type": "boolean" }
         },
         "mode": {
           "type": "string"
         },
         "threshold": {
           "type": "integer"
         },
         "isReady": {
           "type": "boolean"
         }
       },
       "required": ["waitingNodes", "mode", "threshold", "isReady"]
     }
   },
   "required": ["input", "output"],
   "additionalProperties": false
 }